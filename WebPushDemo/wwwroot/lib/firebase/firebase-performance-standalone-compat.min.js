!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).firebase=t()}(this,function(){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function p(e,a,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((c=c.apply(e,a||[])).next())})}function f(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i=(e.prototype.wrapCallback=function(n){var r=this;return function(e,t){e?r.reject(e):r.resolve(t),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(e):n(e,t))}},e);function e(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})}var o,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(c,o=Error),c);function c(e,t,n){return(t=o.call(this,t)||this).code=e,t.customData=n,t.name="FirebaseError",Object.setPrototypeOf(t,c.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,u.prototype.create),t}var u=(t.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=t[0]||{},o=this.service+"/"+e,e=this.errors[e],e=e?(r=i,e.replace(m,function(e,t){var n=r[t];return null!=n?String(n):"<"+t+"?>"})):"Error",e=this.serviceName+": "+e+" ("+o+").";return new s(o,e,i)},t);function t(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var m=/\{\$([^}]+)}/g;function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function v(e,t){if(e===t)return 1;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return;var s=e[a],c=t[a];if(y(s)&&y(c)){if(!v(s,c))return}else if(s!==c)return}for(var u=0,l=r;u<l.length;u++)if(a=l[u],!n.includes(a))return;return 1}function y(e){return null!==e&&"object"==typeof e}var b=(n.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},n.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},n.prototype.setServiceProps=function(e){return this.serviceProps=e,this},n.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},n);function n(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var _="[DEFAULT]",w=(I.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)&&(e=new i,this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize()))try{var n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}return this.instancesDeferred.get(t).promise},I.prototype.getImmediate=function(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),e=null!==(e=null==e?void 0:e.optional)&&void 0!==e&&e;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(e)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(t){if(e)return null;throw t}},I.prototype.getComponent=function(){return this.component},I.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:_})}catch(e){}try{for(var r=d(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=h(i.value,2),a=o[0],s=o[1],c=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:c});s.resolve(u)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},I.prototype.clearInstance=function(e){this.instancesDeferred.delete(e=void 0===e?_:e),this.instancesOptions.delete(e),this.instances.delete(e)},I.prototype.delete=function(){return p(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(a(a([],h(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),h(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return e.sent(),[2]}})})},I.prototype.isComponentSet=function(){return null!=this.component},I.prototype.isInitialized=function(e){return this.instances.has(e=void 0===e?_:e)},I.prototype.getOptions=function(e){return this.instancesOptions.get(e=void 0===e?_:e)||{}},I.prototype.initialize=function(e){var t,n,r=void 0===(r=(e=void 0===e?{}:e).options)?{}:r,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:r});try{for(var a=d(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var c=h(s.value,2),u=c[0],l=c[1];i===this.normalizeInstanceIdentifier(u)&&l.resolve(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},I.prototype.onInit=function(e,t){var n=this.normalizeInstanceIdentifier(t),r=null!==(t=this.onInitCallbacks.get(n))&&void 0!==t?t:new Set;return r.add(e),this.onInitCallbacks.set(n,r),(t=this.instances.get(n))&&e(t,n),function(){r.delete(e)}},I.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var o=d(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},I.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n;if(!(e=this.instances.get(t))&&this.component&&(e=this.component.instanceFactory(this.container,{instanceIdentifier:(n=t)===_?void 0:n,options:r}),this.instances.set(t,e),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(e,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,e)}catch(e){}return e||null},I.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=_),!this.component||this.component.multipleInstances?e:_},I.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},I);function I(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}var E=(S.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},S.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},S.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new w(e,this);return this.providers.set(e,t),t},S.prototype.getProviders=function(){return Array.from(this.providers.values())},S);function S(e){this.name=e,this.providers=new Map}var T,O=[];function C(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=P[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,a(["["+i+"]  "+e.name+":"],n))}}(K=T=T||{})[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT";var A={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},N=T.INFO,P=((it={})[T.DEBUG]="log",it[T.VERBOSE]="log",it[T.INFO]="info",it[T.WARN]="warn",it[T.ERROR]="error",it),k=(Object.defineProperty(D.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in T))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),D.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?A[e]:e},Object.defineProperty(D.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),D.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,T.DEBUG],e)),this._logHandler.apply(this,a([this,T.DEBUG],e))},D.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,T.VERBOSE],e)),this._logHandler.apply(this,a([this,T.VERBOSE],e))},D.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,T.INFO],e)),this._logHandler.apply(this,a([this,T.INFO],e))},D.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,T.WARN],e)),this._logHandler.apply(this,a([this,T.WARN],e))},D.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,T.ERROR],e)),this._logHandler.apply(this,a([this,T.ERROR],e))},D);function D(e){this.name=e,this._logLevel=N,this._logHandler=C,this._userLogHandler=null,O.push(this)}function j(a,t){for(var e=0,n=O;e<n.length;e++)!function(e){var o=null;t&&t.level&&(o=A[t.level]),e.userLogHandler=null===a?null:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(function(e){return e}).join(" ");t>=(null!=o?o:e.logLevel)&&a({level:T[t].toLowerCase(),message:i,args:n,type:e.name})}}(n[e])}var R=(L.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){return"VERSION"===(null==(t=(t=e).getComponent())?void 0:t.type)?(e=e.getImmediate()).library+"/"+e.version:null;var t}).filter(function(e){return e}).join(" ")},L);function L(e){this.container=e}var M="@firebase/app",x=new k("@firebase/app"),B="[DEFAULT]",F=((K={})[M]="fire-core",K["@firebase/app-compat"]="fire-core-compat",K["@firebase/analytics"]="fire-analytics",K["@firebase/analytics-compat"]="fire-analytics-compat",K["@firebase/app-check"]="fire-app-check",K["@firebase/app-check-compat"]="fire-app-check-compat",K["@firebase/auth"]="fire-auth",K["@firebase/auth-compat"]="fire-auth-compat",K["@firebase/database"]="fire-rtdb",K["@firebase/database-compat"]="fire-rtdb-compat",K["@firebase/functions"]="fire-fn",K["@firebase/functions-compat"]="fire-fn-compat",K["@firebase/installations"]="fire-iid",K["@firebase/installations-compat"]="fire-iid-compat",K["@firebase/messaging"]="fire-fcm",K["@firebase/messaging-compat"]="fire-fcm-compat",K["@firebase/performance"]="fire-perf",K["@firebase/performance-compat"]="fire-perf-compat",K["@firebase/remote-config"]="fire-rc",K["@firebase/remote-config-compat"]="fire-rc-compat",K["@firebase/storage"]="fire-gcs",K["@firebase/storage-compat"]="fire-gcs-compat",K["@firebase/firestore"]="fire-fst",K["@firebase/firestore-compat"]="fire-fst-compat",K["fire-js"]="fire-js",K.firebase="fire-js-all",K),U=new Map,q=new Map;function z(t,n){try{t.container.addComponent(n)}catch(e){x.debug("Component "+n.name+" failed to register with FirebaseApp "+t.name,e)}}function V(e){var t,n,r=e.name;if(q.has(r))return x.debug("There were multiple attempts to register component "+r+"."),!1;q.set(r,e);try{for(var i=d(U.values()),o=i.next();!o.done;o=i.next())z(o.value,e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}function H(e,t){return e.container.getProvider(t)}var K=((it={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",it["bad-app-name"]="Illegal App name: '{$appName}",it["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",it["app-deleted"]="Firebase App named '{$appName}' already deleted",it["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",it["invalid-log-argument"]="First argument to `onLog` must be null or a function.",it),$=new u("app","Firebase",K),W=(Object.defineProperty(G.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(e){this._isDeleted=e},enumerable:!1,configurable:!0}),G.prototype.checkDestroyed=function(){if(this.isDeleted)throw $.create("app-deleted",{appName:this._name})},G);function G(e,t,n){var r=this;this._isDeleted=!1,this._options=l({},e),this._config=l({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new b("app",function(){return r},"PUBLIC"))}var J="9.1.2";function Y(e,t){var n,r,i=l({name:B,automaticDataCollectionEnabled:!1},t="object"!=typeof(t=void 0===t?{}:t)?{name:t}:t),o=i.name;if("string"!=typeof o||!o)throw $.create("bad-app-name",{appName:String(o)});if(t=U.get(o)){if(v(e,t.options)&&v(i,t.config))return t;throw $.create("duplicate-app",{appName:o})}var a=new E(o);try{for(var s=d(q.values()),c=s.next();!c.done;c=s.next()){var u=c.value;a.addComponent(u)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i=new W(e,i,a),U.set(o,i),i}function X(n){return p(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return t=n.name,U.has(t)?(U.delete(t),[4,Promise.all(n.container.getProviders().map(function(e){return e.delete()}))]):[3,2];case 1:e.sent(),n.isDeleted=!0,e.label=2;case 2:return[2]}})})}function Z(e,t,n){var r=null!==(i=F[e])&&void 0!==i?i:e;n&&(r+="-"+n);var i=r.match(/\s|\//),e=t.match(/\s|\//);if(i||e)return n=['Unable to register library "'+r+'" with version "'+t+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&e&&n.push("and"),e&&n.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void x.warn(n.join(" "));V(new b(r+"-version",function(){return{library:r,version:t}},"VERSION"))}function Q(e,t){if(null!==e&&"function"!=typeof e)throw $.create("invalid-log-argument");j(e,t)}function ee(e){var t=e;O.forEach(function(e){e.setLogLevel(t)})}V(new b("platform-logger",function(e){return new R(e)},"PRIVATE")),Z(M,"0.7.3",void 0),Z("fire-js","");var te=Object.freeze({__proto__:null,SDK_VERSION:J,_DEFAULT_ENTRY_NAME:B,_addComponent:z,_addOrOverwriteComponent:function(e,t){e.container.addOrOverwriteComponent(t)},_apps:U,_clearComponents:function(){q.clear()},_components:q,_getProvider:H,_registerComponent:V,_removeServiceInstance:function(e,t,n){void 0===n&&(n=B),H(e,t).clearInstance(n)},deleteApp:X,getApp:function(e){var t=U.get(e=void 0===e?B:e);if(!t)throw $.create("no-app",{appName:e});return t},getApps:function(){return Array.from(U.values())},initializeApp:Y,onLog:Q,registerVersion:Z,setLogLevel:ee,FirebaseError:s}),ne=(Object.defineProperty(re.prototype,"automaticDataCollectionEnabled",{get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this.automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"options",{get:function(){return this._delegate.options},enumerable:!1,configurable:!0}),re.prototype.delete=function(){return this.firebase.INTERNAL.removeApp(this.name),X(this._delegate)},re.prototype._getService=function(e,t){return void 0===t&&(t=B),this._delegate.checkDestroyed(),this._delegate.container.getProvider(e).getImmediate({identifier:t})},re);function re(e,t){var n=this;this._delegate=e,this.firebase=t,z(e,new b("app-compat",function(){return n},"PUBLIC"))}var K=((it={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",it["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",it),ie=new u("app-compat","Firebase",K);M=function(){var i,n,o,e=(i=ne,n={},(o={__esModule:!0,initializeApp:function(e,t){return e=Y(e,t=void 0===t?{}:t),g(n,e.name)?n[e.name]:(t=new i(e,o),n[e.name]=t)},app:a,registerVersion:Z,setLogLevel:ee,onLog:Q,apps:null,SDK_VERSION:J,INTERNAL:{registerComponent:function(n){var e,r=n.name,t=r.replace("-compat","");return V(n)&&"PUBLIC"===n.type&&(e=function(e){if("function"!=typeof(e=void 0===e?a():e)[t])throw ie.create("invalid-app-argument",{appName:r});return e[t]()},void 0!==n.serviceProps&&function e(t,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return n}for(var r in n)n.hasOwnProperty(r)&&"__proto__"!==r&&(t[r]=e(t[r],n[r]));return t}(e,n.serviceProps),o[t]=e,i.prototype[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,r).apply(this,n.multipleInstances?e:[])}),"PUBLIC"===n.type?o[t]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"!==t?t:null},modularAPIs:te}}).default=o,Object.defineProperty(o,"apps",{get:function(){return Object.keys(n).map(function(e){return n[e]})}}),a.App=i,o);function a(e){if(!g(n,e=e||B))throw ie.create("no-app",{appName:e});return n[e]}e.SDK_VERSION=e.SDK_VERSION+"_LITE";var t=e.INTERNAL.registerComponent;return e.INTERNAL.registerComponent=function(e){if("PUBLIC"!==e.type||e.name.includes("performance")||e.name.includes("installations"))return t(e);throw Error(name+" cannot register with the standalone perf instance")},e}();function oe(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function ae(n,r,i){var o,e=new Promise(function(e,t){oe(o=n[r].apply(n,i)).then(e,t)});return e.request=o,e}function se(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function ce(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return ae(this[n],e,arguments)})})}function ue(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function le(e,r,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[r],(t=ae(e,n,arguments)).then(function(e){if(e)return new fe(e,t.request)});var e,t})})}function pe(e){this._index=e}function fe(e,t){this._cursor=e,this._request=t}function de(e){this._store=e}function he(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function me(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new he(n)}function ge(e){this._db=e}Z("@firebase/app-compat","0.1.4","lite"),M.registerVersion("firebase","9.1.2","app-compat"),se(pe,"_index",["name","keyPath","multiEntry","unique"]),ce(pe,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),le(pe,"_index",IDBIndex,["openCursor","openKeyCursor"]),se(fe,"_cursor",["direction","key","primaryKey","value"]),ce(fe,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(fe.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),oe(t._request).then(function(e){if(e)return new fe(e,t._request)})})})}),de.prototype.createIndex=function(){return new pe(this._store.createIndex.apply(this._store,arguments))},de.prototype.index=function(){return new pe(this._store.index.apply(this._store,arguments))},se(de,"_store",["name","keyPath","indexNames","autoIncrement"]),ce(de,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),le(de,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ue(de,"_store",IDBObjectStore,["deleteIndex"]),he.prototype.objectStore=function(){return new de(this._tx.objectStore.apply(this._tx,arguments))},se(he,"_tx",["objectStoreNames","mode"]),ue(he,"_tx",IDBTransaction,["abort"]),me.prototype.createObjectStore=function(){return new de(this._db.createObjectStore.apply(this._db,arguments))},se(me,"_db",["name","version","objectStoreNames"]),ue(me,"_db",IDBDatabase,["deleteObjectStore","close"]),ge.prototype.transaction=function(){return new he(this._db.transaction.apply(this._db,arguments))},se(ge,"_db",["name","version","objectStoreNames"]),ue(ge,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[de,pe].forEach(function(e){i in e.prototype&&(e.prototype[i.replace("open","iterate")]=function(){var e=(n=arguments,Array.prototype.slice.call(n)),t=e[e.length-1],n=this._store||this._index,r=n[i].apply(n,e.slice(0,-1));r.onsuccess=function(){t(r.result)}})})}),[pe,de].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var r=this,i=[];return new Promise(function(t){r.iterateCursor(e,function(e){e?(i.push(e.value),void 0===n||i.length!=n?e.continue():t(i)):t(i)})})})});var ve=1e4,ye="w:0.5.1",be="FIS_v2",_e="https://firebaseinstallations.googleapis.com/v1",we=36e5,K=((it={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',it["not-registered"]="Firebase Installation is not registered.",it["installation-not-found"]="Firebase Installation not found.",it["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',it["app-offline"]="Could not process request. Application offline.",it["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",it),Ie=new u("installations","Installations",K);function Ee(e){return e instanceof s&&e.code.includes("request-failed")}function Se(e){return e=e.projectId,_e+"/projects/"+e+"/installations"}function Te(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}function Oe(n,r){return p(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return[4,r.json()];case 1:return t=e.sent().error,[2,Ie.create("request-failed",{requestName:n,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})]}})})}function Ce(e){return e=e.apiKey,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Ae(n){return p(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return[4,n()];case 1:return 500<=(t=e.sent()).status&&t.status<600?[2,n()]:[2,t]}})})}function Ne(t){return new Promise(function(e){setTimeout(e,t)})}var Pe=/^[cdef][\w-]{21}$/,ke="";function De(e){return e.appName+"!"+e.appId}var je=new Map;function Re(e,t){var n;Le(e=De(e),t),n=e,e=t,!Me&&"BroadcastChannel"in self&&((Me=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Le(e.data.key,e.data.fid)}),(t=Me)&&t.postMessage({key:n,fid:e}),0===je.size&&Me&&(Me.close(),Me=null)}function Le(e,t){var n,r;if(e=je.get(e))try{for(var i=d(e),o=i.next();!o.done;o=i.next())(0,o.value)(t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}var Me=null,xe="firebase-installations-store",Be=null;function Fe(){var e,t,n;return Be||(e=1,t=function(e){0===e.oldVersion&&e.createObjectStore(xe)},(n=(e=ae(indexedDB,"open",["firebase-installations-database",e])).request)&&(n.onupgradeneeded=function(e){t(new me(n.result,e.oldVersion,n.transaction))}),Be=e.then(function(e){return new ge(e)})),Be}function Ue(o,a){return p(this,void 0,void 0,function(){var t,n,r,i;return f(this,function(e){switch(e.label){case 0:return t=De(o),[4,Fe()];case 1:return r=e.sent(),[4,(r=(n=r.transaction(xe,"readwrite")).objectStore(xe)).get(t)];case 2:return i=e.sent(),[4,r.put(a,t)];case 3:return e.sent(),[4,n.complete];case 4:return e.sent(),i&&i.fid===a.fid||Re(o,a.fid),[2,a]}})})}function qe(r){return p(this,void 0,void 0,function(){var t,n;return f(this,function(e){switch(e.label){case 0:return t=De(r),[4,Fe()];case 1:return[4,(n=(n=e.sent()).transaction(xe,"readwrite")).objectStore(xe).delete(t)];case 2:return e.sent(),[4,n.complete];case 3:return e.sent(),[2]}})})}function ze(a,s){return p(this,void 0,void 0,function(){var t,n,r,i,o;return f(this,function(e){switch(e.label){case 0:return t=De(a),[4,Fe()];case 1:return r=e.sent(),[4,(r=(n=r.transaction(xe,"readwrite")).objectStore(xe)).get(t)];case 2:return i=e.sent(),void 0!==(o=s(i))?[3,4]:[4,r.delete(t)];case 3:return e.sent(),[3,6];case 4:return[4,r.put(o,t)];case 5:e.sent(),e.label=6;case 6:return[4,n.complete];case 7:return e.sent(),!o||i&&i.fid===o.fid||Re(a,o.fid),[2,o]}})})}function Ve(i){return p(this,void 0,void 0,function(){var r,t,n;return f(this,function(e){switch(e.label){case 0:return[4,ze(i,function(e){var t,n;return e=Ke(e||{fid:function(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=btoa(String.fromCharCode.apply(String,a([],h(e)))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22);return Pe.test(t)?t:ke}catch(e){return ke}}(),registrationStatus:0}),t=i,e=0!==(n=e).registrationStatus?1===n.registrationStatus?{installationEntry:n,registrationPromise:function(i){return p(this,void 0,void 0,function(){var t,n,r;return f(this,function(e){switch(e.label){case 0:return[4,He(i)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,Ne(100)];case 3:return e.sent(),[4,He(i)];case 4:return t=e.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Ve(i)];case 6:return r=e.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,t]}})})}(t)}:{installationEntry:n}:navigator.onLine?{installationEntry:n={fid:n.fid,registrationStatus:1,registrationTime:Date.now()},registrationPromise:t=function(r,i){return p(this,void 0,void 0,function(){var t,n;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),[4,function(a){var s=i.fid;return p(this,void 0,void 0,function(){var t,n,r,i,o;return f(this,function(e){switch(e.label){case 0:return t=Se(a),n=Ce(a),o={fid:s,authVersion:be,appId:a.appId,sdkVersion:ye},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,Ae(function(){return fetch(t,r)})];case 1:return(i=e.sent()).ok?[4,i.json()]:[3,3];case 2:return[2,{fid:(o=e.sent()).fid||s,registrationStatus:2,refreshToken:o.refreshToken,authToken:Te(o.authToken)}];case 3:return[4,Oe("Create Installation",i)];case 4:throw e.sent()}})})}(r)];case 1:return t=e.sent(),[2,Ue(r,t)];case 2:return Ee(n=e.sent())&&409===n.customData.serverCode?[4,qe(r)]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,Ue(r,{fid:i.fid,registrationStatus:0})];case 5:e.sent(),e.label=6;case 6:throw n;case 7:return[2]}})})}(t,n)}:{installationEntry:n,registrationPromise:Promise.reject(Ie.create("app-offline"))},r=e.registrationPromise,e.installationEntry})];case 1:return(t=e.sent()).fid!==ke?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=e.sent(),n)];case 3:return[2,{installationEntry:t,registrationPromise:r}]}})})}function He(e){return ze(e,function(e){if(!e)throw Ie.create("installation-not-found");return Ke(e)})}function Ke(e){return 1===e.registrationStatus&&e.registrationTime+ve<Date.now()?{fid:e.fid,registrationStatus:0}:e}function $e(e,c){var u=e.appConfig,l=e.platformLoggerProvider;return p(this,void 0,void 0,function(){var r,i,o,a,s;return f(this,function(e){switch(e.label){case 0:return n=c.fid,r=Se(u)+"/"+n+"/authTokens:generate",t=u,n=(n=c).refreshToken,(t=Ce(t)).append("Authorization",be+" "+n),i=t,(s=l.getImmediate({optional:!0}))&&i.append("x-firebase-client",s.getPlatformInfoString()),s={installation:{sdkVersion:ye}},o={method:"POST",headers:i,body:JSON.stringify(s)},[4,Ae(function(){return fetch(r,o)})];case 1:return(a=e.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,Te(s=e.sent())];case 3:return[4,Oe("Generate Auth Token",a)];case 4:throw e.sent()}var t,n})})}function We(a,s){return void 0===s&&(s=!1),p(this,void 0,void 0,function(){var o,t,n;return f(this,function(e){switch(e.label){case 0:return[4,ze(a.appConfig,function(e){if(!Je(e))throw Ie.create("not-registered");var t,n,r,i=e.authToken;if(s||2!==(t=i).requestStatus||(n=t,(r=Date.now())<n.creationTime||n.creationTime+n.expiresIn<r+we)){if(1===i.requestStatus)return o=function(r,i){return p(this,void 0,void 0,function(){var t,n;return f(this,function(e){switch(e.label){case 0:return[4,Ge(r.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,Ne(100)];case 3:return e.sent(),[4,Ge(r.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0===(n=t.authToken).requestStatus?[2,We(r,i)]:[2,n]}})})}(a,s),e;if(!navigator.onLine)throw Ie.create("app-offline");return t=e,i={requestStatus:1,requestTime:Date.now()},i=l(l({},t),{authToken:i}),o=function(i,o){return p(this,void 0,void 0,function(){var t,n,r;return f(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,$e(i,o)];case 1:return t=e.sent(),r=l(l({},o),{authToken:t}),[4,Ue(i.appConfig,r)];case 2:return e.sent(),[2,t];case 3:return!Ee(n=e.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,qe(i.appConfig)];case 4:return e.sent(),[3,7];case 5:return r=l(l({},o),{authToken:{requestStatus:0}}),[4,Ue(i.appConfig,r)];case 6:e.sent(),e.label=7;case 7:throw n;case 8:return[2]}})})}(a,i),i}return e})];case 1:return t=e.sent(),o?[4,o]:[3,3];case 2:return n=e.sent(),[3,4];case 3:n=t.authToken,e.label=4;case 4:return[2,n]}})})}function Ge(e){return ze(e,function(e){if(!Je(e))throw Ie.create("not-registered");var t=e.authToken;return 1===t.requestStatus&&t.requestTime+ve<Date.now()?l(l({},e),{authToken:{requestStatus:0}}):e})}function Je(e){return void 0!==e&&2===e.registrationStatus}function Ye(e){return Ie.create("missing-app-config-values",{valueName:e})}var Xe="installations";V(new b(Xe,function(e){return{app:e=e.getProvider("app").getImmediate(),appConfig:function(e){var t,n;if(!e||!e.options)throw Ye("App Configuration");if(!e.name)throw Ye("App Name");try{for(var r=d(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw Ye(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(e),platformLoggerProvider:H(e,"platform-logger"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),V(new b("installations-internal",function(e){var t=H(e.getProvider("app").getImmediate(),Xe).getImmediate();return{getId:function(){return function(i){return p(this,void 0,void 0,function(){var t,n,r;return f(this,function(e){switch(e.label){case 0:return[4,Ve((t=i).appConfig)];case 1:return n=e.sent(),r=n.installationEntry,(n.registrationPromise||We(t)).catch(console.error),[2,r.fid]}})})}(t)},getToken:function(e){return function(n,r){return void 0===r&&(r=!1),p(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return[4,function(n){return p(this,void 0,void 0,function(){var t;return f(this,function(e){switch(e.label){case 0:return[4,Ve(n)];case 1:return(t=e.sent().registrationPromise)?[4,t]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})}((t=n).appConfig)];case 1:return e.sent(),[4,We(t,r)];case 2:return[2,e.sent().token]}})})}(t,e)}}},"PRIVATE")),Z("@firebase/installations","0.5.1");var Ze,Qe,et="0.5.1",tt="FB-PERF-TRACE-MEASURE",nt="@firebase/performance/config",rt="@firebase/performance/configexpire",it="Performance",K=((K={})["trace started"]="Trace {$traceName} was started before.",K["trace stopped"]="Trace {$traceName} is not running.",K["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",K["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",K["no window"]="Window is not available.",K["no app id"]="App id is not available.",K["no project id"]="Project id is not available.",K["no api key"]="Api key is not available.",K["invalid cc log"]="Attempted to queue invalid cc event",K["FB not default"]="Performance can only start when Firebase app instance is the default one.",K["RC response not ok"]="RC response is not ok",K["invalid attribute name"]="Attribute name {$attributeName} is invalid.",K["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",K["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",K["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",K["already initialized"]="initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance.",K),ot=new u("performance",it,K),at=new k(it);at.logLevel=T.INFO;var st,ct,ut=(lt.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},lt.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},lt.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},lt.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},lt.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},lt.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},lt.prototype.requiredApisAvailable=function(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?"object"==typeof indexedDB||(at.info("IndexedDB is not supported by current browswer"),!1):(at.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},lt.prototype.setupObserver=function(e,i){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var t=0,n=e.getEntries();t<n.length;t++){var r=n[t];i(r)}}).observe({entryTypes:[e]})},lt.getInstance=function(){return Ze=void 0===Ze?new lt(Qe):Ze},lt);function lt(e){if(!(this.window=e))throw ot.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}function pt(e,t){var n=e.length-t.length;if(n<0||1<n)throw ot.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var ft,dt=(ht.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},ht.getInstance=function(){return ct=void 0===ct?new ht:ct},ht);function ht(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=pt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=pt("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(it=ft=ft||{})[it.UNKNOWN=0]="UNKNOWN",it[it.VISIBLE=1]="VISIBLE",it[it.HIDDEN=2]="HIDDEN";var mt=["firebase_","google_","ga_"],gt=new RegExp("^[a-zA-Z]\\w*$");function vt(){switch(ut.getInstance().document.visibilityState){case"visible":return ft.VISIBLE;case"hidden":return ft.HIDDEN;default:return ft.UNKNOWN}}function yt(e){if(!(e=null===(e=e.options)||void 0===e?void 0:e.appId))throw ot.create("no app id");return e}var bt="0.0.1",_t={loggingEnabled:!0},wt="FIREBASE_INSTALLATIONS_AUTH";var It="Could not fetch config, will use default configs";function Et(e){if(!e)return e;var t=dt.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=_t.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=St(t.tracesSamplingRate),t.logNetworkAfterSampling=St(t.networkRequestsSamplingRate),e}function St(e){return Math.random()<=e}var Tt,Ot=1;function Ct(e){var o,n;return Ot=2,Tt=Tt||(o=e,n=ut.getInstance().document,new Promise(function(e){var t;n&&"complete"!==n.readyState?(t=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())},n.addEventListener("readystatechange",t)):e()}).then(function(){return(e=(e=o.installations).getId()).then(function(e){st=e}),e;var e}).then(function(e){return t=o,n=e,(e=function(){var e=ut.getInstance().localStorage;if(e){var t=e.getItem(rt);if(t&&Number(t)>Date.now()&&(e=e.getItem(nt)))try{return JSON.parse(e)}catch(e){return}}}())?(Et(e),Promise.resolve()):(i=n,(t=(t=(r=t).installations).getToken()).then(function(e){}),t.then(function(e){var t=function(e){if(!(e=null===(e=e.options)||void 0===e?void 0:e.projectId))throw ot.create("no project id");return e}(r.app),n=function(e){if(!(e=null===(e=e.options)||void 0===e?void 0:e.apiKey))throw ot.create("no api key");return e}(r.app),e=new Request("https://firebaseremoteconfig.googleapis.com/v1/projects/"+t+"/namespaces/fireperf:fetch?key="+n,{method:"POST",headers:{Authorization:wt+" "+e},body:JSON.stringify({app_instance_id:i,app_instance_id_token:e,app_id:yt(r.app),app_version:et,sdk_version:bt})});return fetch(e).then(function(e){if(e.ok)return e.json();throw ot.create("RC response not ok")})}).catch(function(){at.info(It)}).then(Et).then(function(e){var t=e;e=ut.getInstance().localStorage,t&&e&&(e.setItem(nt,JSON.stringify(t)),e.setItem(rt,String(Date.now()+60*dt.getInstance().configTimeToLive*60*1e3)))},function(){}));var t,n,r,i}).then(At,At))}function At(){Ot=3}var Nt,Pt=3,kt=[],Dt=!1;function jt(e){setTimeout(function(){var e,t,r,n;if(0!==Pt)return kt.length?(n=(e=kt.splice(0,1e3)).map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:dt.getInstance().logSource,log_event:n},r=e,n=t,t=dt.getInstance().getFlTransportFullUrl(),void fetch(t,{method:"POST",body:JSON.stringify(n)}).then(function(e){return e.ok||at.info("Call to Firebase backend failed."),e.json()}).then(function(e){var t=Number(e.nextRequestWaitMillis),n=1e4;isNaN(t)||(n=Math.max(t,n)),e=e.logResponseDetails,Array.isArray(e)&&0<e.length&&"RETRY_REQUEST_LATER"===e[0].responseAction&&(kt=a(a([],r),kt),at.info("Retry transport request later.")),Pt=3,jt(n)}).catch(function(){kt=a(a([],e),kt),Pt--,at.info("Tries left: "+Pt+"."),jt(1e4)})):jt(1e4)},e)}function Rt(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e){if(!e.eventTime||!e.message)throw ot.create("invalid cc log");kt=a(a([],kt),[e])}({message:n.apply(void 0,e),eventTime:Date.now()})}}function Lt(e,t){(Nt=Nt||Rt(Bt))(e,t)}function Mt(e){var t=dt.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&ut.getInstance().requiredApisAvailable()&&(e.isAuto&&vt()!==ft.VISIBLE||(3===Ot?xt(e):Ct(e.performanceController).then(function(){return xt(e)},function(){return xt(e)})))}function xt(e){var t;!st||(t=dt.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout(function(){return Lt(e,1)},0)}function Bt(e,t){return 0===t?(t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},t={application_info:Ft(e.performanceController.app),network_request_metric:t},JSON.stringify(t)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();return 0!==Object.keys(n).length&&(t.custom_attributes=n),t={application_info:Ft(e.performanceController.app),trace_metric:t},JSON.stringify(t)}(e)}function Ft(e){return{google_app_id:yt(e),app_instance_id:st,web_app_info:{sdk_version:et,page_url:ut.getInstance().getUrl(),service_worker_status:"serviceWorker"in(e=ut.getInstance().navigator)?e.serviceWorker.controller?2:3:1,visibility_state:vt(),effective_connection_type:function(){var e=ut.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}var Ut=["_fp","_fcp","_fid"],qt=(zt.prototype.start=function(){if(1!==this.state)throw ot.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},zt.prototype.stop=function(){if(2!==this.state)throw ot.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Mt(this)},zt.prototype.record=function(e,t,n){if(e<=0)throw ot.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw ot.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=l({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Mt(this)},zt.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},zt.prototype.putMetric=function(e,t){if(n=e,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<Ut.indexOf(n))&&n.startsWith("_"))throw ot.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=(e=t,(t=Math.floor(e))<e&&at.info("Metric value should be an Integer, setting the value as : "+t+"."),t)},zt.prototype.getMetric=function(e){return this.counters[e]||0},zt.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||40<n.length||mt.some(function(e){return n.startsWith(e)})||!n.match(gt)),i=0!==(i=t).length&&i.length<=100;if(r&&i)this.customAttributes[e]=t;else{if(!r)throw ot.create("invalid attribute name",{attributeName:e});if(!i)throw ot.create("invalid attribute value",{attributeValue:t})}},zt.prototype.getAttribute=function(e){return this.customAttributes[e]},zt.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},zt.prototype.getAttributes=function(){return l({},this.customAttributes)},zt.prototype.setStartTime=function(e){this.startTimeUs=e},zt.prototype.setDuration=function(e){this.durationUs=e},zt.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure);(e=e&&e[0])&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},zt.createOobTrace=function(e,t,n,r){var i=ut.getInstance().getUrl();i&&(e=new zt(e,"_wt_"+i,!0),i=Math.floor(1e3*ut.getInstance().getTimeOrigin()),e.setStartTime(i),t&&t[0]&&(e.setDuration(Math.floor(1e3*t[0].duration)),e.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),e.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),e.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n&&((t=n.find(function(e){return"first-paint"===e.name}))&&t.startTime&&e.putMetric("_fp",Math.floor(1e3*t.startTime)),(n=n.find(function(e){return"first-contentful-paint"===e.name}))&&n.startTime&&e.putMetric("_fcp",Math.floor(1e3*n.startTime)),r&&e.putMetric("_fid",Math.floor(1e3*r))),Mt(e))},zt.createUserTimingTrace=function(e,t){Mt(new zt(e,t,!1,t))},zt);function zt(e,t,n,r){void 0===n&&(n=!1),this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=ut.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=r||tt+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}function Vt(e,t){var n,r,i,o=t;o&&void 0!==o.responseStart&&(r=ut.getInstance().getTimeOrigin(),i=Math.floor(1e3*(o.startTime+r)),t=o.responseStart?Math.floor(1e3*(o.responseStart-o.startTime)):void 0,r=Math.floor(1e3*(o.responseEnd-o.startTime)),o={performanceController:e,url:o.name&&o.name.split("?")[0],responsePayloadBytes:o.transferSize,startTimeUs:i,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:r},n=o,(i=dt.getInstance()).instrumentationEnabled&&(t=n.url,r=i.logEndPointUrl.split("?")[0],o=i.flTransportEndpointUrl.split("?")[0],t!==r&&t!==o&&i.loggingEnabled&&i.logNetworkAfterSampling&&setTimeout(function(){return Lt(n,0)},0)))}function Ht(o){st&&(setTimeout(function(){var t,n,e,r,i;t=o,e=ut.getInstance(),r=e.getEntriesByType("navigation"),i=e.getEntriesByType("paint"),e.onFirstInputDelay?(n=setTimeout(function(){qt.createOobTrace(t,r,i),n=void 0},5e3),e.onFirstInputDelay(function(e){n&&(clearTimeout(n),qt.createOobTrace(t,r,i,e))})):qt.createOobTrace(t,r,i)},0),setTimeout(function(){return function(t){for(var e=ut.getInstance(),n=0,r=e.getEntriesByType("resource");n<r.length;n++){var i=r[n];Vt(t,i)}e.setupObserver("resource",function(e){return Vt(t,e)})}(o)},0),setTimeout(function(){return function(t){for(var e=ut.getInstance(),n=0,r=e.getEntriesByType("measure");n<r.length;n++){var i=r[n];Kt(t,i)}e.setupObserver("measure",function(e){return Kt(t,e)})}(o)},0))}function Kt(e,t){(t=t.name).substring(0,tt.length)!==tt&&qt.createUserTimingTrace(e,t)}var $t=(Wt.prototype._init=function(e){var t=this;this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),ut.getInstance().requiredApisAvailable()?new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}).then(function(e){e&&(Dt||(jt(5500),Dt=!0),Ct(t).then(function(){return Ht(t)},function(){return Ht(t)}),t.initialized=!0)}).catch(function(e){at.info("Environment doesn't support IndexedDB: "+e)}):at.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))},Object.defineProperty(Wt.prototype,"instrumentationEnabled",{get:function(){return dt.getInstance().instrumentationEnabled},set:function(e){dt.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Wt.prototype,"dataCollectionEnabled",{get:function(){return dt.getInstance().dataCollectionEnabled},set:function(e){dt.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),Wt);function Wt(e,t){this.app=e,this.installations=t,this.initialized=!1}V(new b("performance",function(e,t){var n=t.options,t=e.getProvider("app").getImmediate(),e=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==t.name)throw ot.create("FB not default");if("undefined"==typeof window)throw ot.create("no window");return Qe=window,(e=new $t(t,e))._init(n),e},"PUBLIC")),Z("@firebase/performance","0.5.1");var Gt=(Object.defineProperty(Jt.prototype,"instrumentationEnabled",{get:function(){return this._delegate.instrumentationEnabled},set:function(e){this._delegate.instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Jt.prototype,"dataCollectionEnabled",{get:function(){return this._delegate.dataCollectionEnabled},set:function(e){this._delegate.dataCollectionEnabled=e},enumerable:!1,configurable:!0}),Jt.prototype.trace=function(e){return t=(t=this._delegate)&&t._delegate?t._delegate:t,new qt(t,e);var t},Jt);function Jt(e,t){this.app=e,this._delegate=t}return(it=M).INTERNAL.registerComponent(new b("performance-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),e=e.getProvider("performance").getImmediate();return new Gt(t,e)},"PUBLIC")),it.registerVersion("@firebase/performance-compat","0.1.1"),M.registerVersion("firebase","9.1.2","compat-lite"),M});