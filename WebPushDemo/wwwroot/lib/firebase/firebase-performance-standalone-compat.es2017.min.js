!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).firebase=t()}(this,function(){"use strict";function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}class i{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(n){return(e,t)=>{e?this.reject(e):this.resolve(t),"function"==typeof n&&(this.promise.catch(()=>{}),1===n.length?n(e):n(e,t))}}}class o extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,r.prototype.create)}}class r{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){var r,n=t[0]||{},t=`${this.service}/${e}`,e=this.errors[e],e=e?(r=n,e.replace(a,(e,t)=>{var n=r[t];return null!=n?String(n):`<${t}?>`})):"Error",e=`${this.serviceName}: ${e} (${t}).`;return new o(t,e,n)}}const a=/\{\$([^}]+)}/g;function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){if(e===t)return 1;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return;const n=e[i],o=t[i];if(u(n)&&u(o)){if(!c(n,o))return}else if(n!==o)return}for(const e of r)if(!n.includes(e))return;return 1}function u(e){return null!==e&&"object"==typeof e}var d=(t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t),h="[DEFAULT]",n=(e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(n=null==e?void 0:e.optional)&&void 0!==n&&n;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:h})}catch(e){}try{for(var r=p(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=f(i.value,2),a=o[0],s=o[1],c=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService({instanceIdentifier:c});s.resolve(l)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){this.instancesDeferred.delete(e=void 0===e?h:e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return e=this,c=function(){var t,n,r,i,o,a,s,e;return n=this,r=function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(l(l([],f(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),f(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return e.sent(),[2]}},s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function c(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!((a=0<(a=s.trys).length&&a[a.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(s=(s=a=void 0)||Promise)(function(n,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((c=c.apply(e,a||[])).next())});var e,a,s,c},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return this.instances.has(e=void 0===e?h:e)},e.prototype.getOptions=function(e){return this.instancesOptions.get(e=void 0===e?h:e)||{}},e.prototype.initialize=function(e){var t,n,r=(e=void 0===e?{}:e).options,r=void 0===r?{}:r,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:r});try{for(var a=p(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var c=f(s.value,2),l=c[0],u=c[1];i===this.normalizeInstanceIdentifier(l)&&u.resolve(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},e.prototype.onInit=function(e,t){var n=this.normalizeInstanceIdentifier(t),r=null!==(t=this.onInitCallbacks.get(n))&&void 0!==t?t:new Set;r.add(e),this.onInitCallbacks.set(n,r);t=this.instances.get(n);return t&&e(t,n),function(){r.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var o=p(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:t===h?void 0:t,options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(e){}return n||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=h),!this.component||this.component.multipleInstances?e:h},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e);function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}function t(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var m,g=(v.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},v.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},v.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new n(e,this);return this.providers.set(e,t),t},v.prototype.getProviders=function(){return Array.from(this.providers.values())},v);function v(e){this.name=e,this.providers=new Map}const b=[];(z=m=m||{})[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT";const y={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},w=m.INFO,_={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},I=(e,t,...n)=>{if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=_[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)}};class E{constructor(e){this.name=e,this._logLevel=w,this._logHandler=I,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in m))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?y[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...e),this._logHandler(this,m.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...e),this._logHandler(this,m.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,m.INFO,...e),this._logHandler(this,m.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,m.WARN,...e),this._logHandler(this,m.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...e),this._logHandler(this,m.ERROR,...e)}}class S{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if("VERSION"!==(null==(t=e.getComponent())?void 0:t.type))return null;var t,e=e.getImmediate();return`${e.library}/${e.version}`}).filter(e=>e).join(" ")}}const T="@firebase/app",C=new E("@firebase/app"),A="[DEFAULT]",N={"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},O=new Map,k=new Map;function D(t,n){try{t.container.addComponent(n)}catch(e){C.debug(`Component ${n.name} failed to register with FirebaseApp ${t.name}`,e)}}function P(e){const t=e.name;if(k.has(t))return C.debug(`There were multiple attempts to register component ${t}.`),!1;k.set(t,e);for(const t of O.values())D(t,e);return!0}function R(e,t){return e.container.getProvider(t)}const L=new r("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class j{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new d("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw L.create("app-deleted",{appName:this._name})}}const M="9.1.2";function $(e,t={}){"object"!=typeof t&&(t={name:t});var n=Object.assign({name:A,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw L.create("bad-app-name",{appName:String(r)});t=O.get(r);if(t){if(c(e,t.options)&&c(n,t.config))return t;throw L.create("duplicate-app",{appName:r})}const i=new g(r);for(const e of k.values())i.addComponent(e);n=new j(e,n,i);return O.set(r,n),n}async function F(e){var t=e.name;O.has(t)&&(O.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function B(e,t,n){var r;let i=null!==(r=N[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);e=i.match(/\s|\//),n=t.match(/\s|\//);if(e||n){const o=[`Unable to register library "${i}" with version "${t}":`];return e&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),e&&n&&o.push("and"),n&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void C.warn(o.join(" "))}P(new d(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function U(e,t){if(null!==e&&"function"!=typeof e)throw L.create("invalid-log-argument");!function(o,e){for(const t of b){let i=null;e&&e.level&&(i=y[e.level]),t.userLogHandler=null===o?null:(e,t,...n)=>{var r=n.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");t>=(null!=i?i:e.logLevel)&&o({level:m[t].toLowerCase(),message:r,args:n,type:e.name})}}}(e,t)}function x(e){var t=e;b.forEach(e=>{e.setLogLevel(t)})}P(new d("platform-logger",e=>new S(e),"PRIVATE")),B(T,"0.7.3",void 0),B("fire-js","");var q,z,V=Object.freeze({__proto__:null,SDK_VERSION:M,_DEFAULT_ENTRY_NAME:A,_addComponent:D,_addOrOverwriteComponent:function(e,t){e.container.addOrOverwriteComponent(t)},_apps:O,_clearComponents:function(){k.clear()},_components:k,_getProvider:R,_registerComponent:P,_removeServiceInstance:function(e,t,n="[DEFAULT]"){R(e,t).clearInstance(n)},deleteApp:F,getApp:function(e="[DEFAULT]"){var t=O.get(e);if(!t)throw L.create("no-app",{appName:e});return t},getApps:function(){return Array.from(O.values())},initializeApp:$,onLog:U,registerVersion:B,setLogLevel:x,FirebaseError:o});class H{constructor(e,t){this._delegate=e,this.firebase=t,D(e,new d("app-compat",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return this.firebase.INTERNAL.removeApp(this.name),F(this._delegate)}_getService(e,t="[DEFAULT]"){return this._delegate.checkDestroyed(),this._delegate.container.getProvider(e).getImmediate({identifier:t})}}const K=new r("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});function W(i){const n={},o={__esModule:!0,initializeApp:function(e,t={}){e=$(e,t);if(s(n,e.name))return n[e.name];t=new i(e,o);return n[e.name]=t},app:a,registerVersion:B,setLogLevel:x,onLog:U,apps:null,SDK_VERSION:M,INTERNAL:{registerComponent:function(t){const n=t.name,r=n.replace("-compat","");var e;return P(t)&&"PUBLIC"===t.type&&(e=(e=a())=>{if("function"!=typeof e[r])throw K.create("invalid-app-argument",{appName:n});return e[r]()},void 0!==t.serviceProps&&function e(t,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return n}for(const r in n)n.hasOwnProperty(r)&&"__proto__"!==r&&(t[r]=e(t[r],n[r]));return t}(e,t.serviceProps),o[r]=e,i.prototype[r]=function(...e){return this._getService.bind(this,n).apply(this,t.multipleInstances?e:[])}),"PUBLIC"===t.type?o[r]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:V}};function a(e){if(!s(n,e=e||A))throw K.create("no-app",{appName:e});return n[e]}return o.default=o,Object.defineProperty(o,"apps",{get:function(){return Object.keys(n).map(e=>n[e])}}),a.App=i,o}const G=function(){const e=W(H);e.SDK_VERSION=`${e.SDK_VERSION}_LITE`;const t=e.INTERNAL.registerComponent;return e.INTERNAL.registerComponent=function(e){if("PUBLIC"===e.type&&!e.name.includes("performance")&&!e.name.includes("installations"))throw Error(`${name} cannot register with the standalone perf instance`);return t(e)},e}();function J(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function Y(n,r,i){var o,e=new Promise(function(e,t){J(o=n[r].apply(n,i)).then(e,t)});return e.request=o,e}function X(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function Z(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return Y(this[n],e,arguments)})})}function Q(t,n,r,e){e.forEach(function(e){e in r.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function ee(e,r,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[r],(t=Y(e,n,arguments)).then(function(e){if(e)return new ne(e,t.request)});var e,t})})}function te(e){this._index=e}function ne(e,t){this._cursor=e,this._request=t}function re(e){this._store=e}function ie(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function oe(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new ie(n)}function ae(e){this._db=e}B("@firebase/app-compat","0.1.4","lite"),G.registerVersion("firebase","9.1.2","app-compat"),X(te,"_index",["name","keyPath","multiEntry","unique"]),Z(te,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ee(te,"_index",IDBIndex,["openCursor","openKeyCursor"]),X(ne,"_cursor",["direction","key","primaryKey","value"]),Z(ne,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(ne.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),J(t._request).then(function(e){if(e)return new ne(e,t._request)})})})}),re.prototype.createIndex=function(){return new te(this._store.createIndex.apply(this._store,arguments))},re.prototype.index=function(){return new te(this._store.index.apply(this._store,arguments))},X(re,"_store",["name","keyPath","indexNames","autoIncrement"]),Z(re,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ee(re,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Q(re,"_store",IDBObjectStore,["deleteIndex"]),ie.prototype.objectStore=function(){return new re(this._tx.objectStore.apply(this._tx,arguments))},X(ie,"_tx",["objectStoreNames","mode"]),Q(ie,"_tx",IDBTransaction,["abort"]),oe.prototype.createObjectStore=function(){return new re(this._db.createObjectStore.apply(this._db,arguments))},X(oe,"_db",["name","version","objectStoreNames"]),Q(oe,"_db",IDBDatabase,["deleteObjectStore","close"]),ae.prototype.transaction=function(){return new ie(this._db.transaction.apply(this._db,arguments))},X(ae,"_db",["name","version","objectStoreNames"]),Q(ae,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[re,te].forEach(function(e){i in e.prototype&&(e.prototype[i.replace("open","iterate")]=function(){var e,t=(e=arguments,Array.prototype.slice.call(e)),n=t[t.length-1],e=this._store||this._index,r=e[i].apply(e,t.slice(0,-1));r.onsuccess=function(){n(r.result)}})})}),[te,re].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var r=this,i=[];return new Promise(function(t){r.iterateCursor(e,function(e){e?(i.push(e.value),void 0===n||i.length!=n?e.continue():t(i)):t(i)})})})});const se=1e4,ce="w:0.5.1",le="FIS_v2",ue=36e5,pe=new r("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fe(e){return e instanceof o&&e.code.includes("request-failed")}function de({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function he(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}async function me(e,t){t=(await t.json()).error;return pe.create("request-failed",{requestName:e,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function ge({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function ve(e){var t=await e();return 500<=t.status&&t.status<600?e():t}function be(t){return new Promise(e=>{setTimeout(e,t)})}const ye=/^[cdef][\w-]{21}$/;function we(e){return`${e.appName}!${e.appId}`}const _e=new Map;function Ie(e,t){e=we(e);Ee(e,t),function(e,t){const n=(!Se&&"BroadcastChannel"in self&&(Se=new BroadcastChannel("[Firebase] FID Change"),Se.onmessage=e=>{Ee(e.data.key,e.data.fid)}),Se);n&&n.postMessage({key:e,fid:t}),0===_e.size&&Se&&(Se.close(),Se=null)}(e,t)}function Ee(e,t){e=_e.get(e);if(e)for(const n of e)n(t)}let Se=null;const Te="firebase-installations-store";let Ce=null;function Ae(){return Ce=Ce||(t=e=>{0===e.oldVersion&&e.createObjectStore(Te)},e=Y(indexedDB,"open",["firebase-installations-database",1]),(n=e.request)&&(n.onupgradeneeded=function(e){t(new oe(n.result,e.oldVersion,n.transaction))}),e.then(function(e){return new ae(e)})),Ce;var t,e,n}async function Ne(e,t){const n=we(e),r=(await Ae()).transaction(Te,"readwrite"),i=r.objectStore(Te),o=await i.get(n);return await i.put(t,n),await r.complete,o&&o.fid===t.fid||Ie(e,t.fid),t}async function Oe(e){const t=we(e),n=(await Ae()).transaction(Te,"readwrite");await n.objectStore(Te).delete(t),await n.complete}async function ke(e,t){const n=we(e),r=(await Ae()).transaction(Te,"readwrite"),i=r.objectStore(Te),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.complete,!a||o&&o.fid===a.fid||Ie(e,a.fid),a}async function De(t){let n;var e=await ke(t,e=>{e=Re(e||{fid:function(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;var e=(t=n,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return ye.test(e)?e:""}catch(e){return""}var t}(),registrationStatus:0}),e=function(e,t){if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:async function(e){let t=await Pe(e);for(;1===t.registrationStatus;)await be(100),t=await Pe(e);if(0!==t.registrationStatus)return t;{const{installationEntry:t,registrationPromise:n}=await De(e);return n||t}}(e)}:{installationEntry:t};if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(pe.create("app-offline"))};t={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:t,registrationPromise:async function(t,n){try{return Ne(t,await async function(e,{fid:t}){const n=de(e),r=ge(e),i={fid:t,authVersion:le,appId:e.appId,sdkVersion:ce},o={method:"POST",headers:r,body:JSON.stringify(i)},a=await ve(()=>fetch(n,o));if(a.ok){const e=await a.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:he(e.authToken)}}throw await me("Create Installation",a)}(t,n))}catch(e){throw fe(e)&&409===e.customData.serverCode?await Oe(t):await Ne(t,{fid:n.fid,registrationStatus:0}),e}}(e,t)}}(t,e);return n=e.registrationPromise,e.installationEntry});return""===e.fid?{installationEntry:await n}:{installationEntry:e,registrationPromise:n}}function Pe(e){return ke(e,e=>{if(!e)throw pe.create("installation-not-found");return Re(e)})}function Re(e){return 1===e.registrationStatus&&e.registrationTime+se<Date.now()?{fid:e.fid,registrationStatus:0}:e}async function Le({appConfig:e,platformLoggerProvider:t},n){const r=([a,s]=[e,n["fid"]],`${de(a)}/${s}/authTokens:generate`),i=function(e,{refreshToken:t}){const n=ge(e);return n.append("Authorization",`FIS_v2 ${t}`),n}(e,n),o=t.getImmediate({optional:!0});var a,s;o&&i.append("x-firebase-client",o.getPlatformInfoString());const c={installation:{sdkVersion:ce}},l={method:"POST",headers:i,body:JSON.stringify(c)},u=await ve(()=>fetch(r,l));if(u.ok)return he(await u.json());throw await me("Generate Auth Token",u)}async function je(i,o=!1){let a;var e=await ke(i.appConfig,e=>{if(!$e(e))throw pe.create("not-registered");var t,n,r=e.authToken;if(!(o||2!==r.requestStatus||(t=r,(n=Date.now())<t.creationTime||t.creationTime+t.expiresIn<n+ue)))return e;if(1===r.requestStatus)return a=async function(e,t){let n=await Me(e.appConfig);for(;1===n.authToken.requestStatus;)await be(100),n=await Me(e.appConfig);var r=n.authToken;return 0===r.requestStatus?je(e,t):r}(i,o),e;{if(!navigator.onLine)throw pe.create("app-offline");const o=(r=e,e={requestStatus:1,requestTime:Date.now()},Object.assign(Object.assign({},r),{authToken:e}));return a=async function(t,n){try{var e=await Le(t,n),r=Object.assign(Object.assign({},n),{authToken:e});return await Ne(t.appConfig,r),e}catch(e){throw!fe(e)||401!==e.customData.serverCode&&404!==e.customData.serverCode?(n=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),await Ne(t.appConfig,n)):await Oe(t.appConfig),e}}(i,o),o}});return a?await a:e.authToken}function Me(e){return ke(e,e=>{if(!$e(e))throw pe.create("not-registered");var t=e.authToken;return 1===t.requestStatus&&t.requestTime+se<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function $e(e){return void 0!==e&&2===e.registrationStatus}function Fe(e){return pe.create("missing-app-config-values",{valueName:e})}const Be="installations";P(new d(Be,e=>{e=e.getProvider("app").getImmediate();return{app:e,appConfig:function(e){if(!e||!e.options)throw Fe("App Configuration");if(!e.name)throw Fe("App Name");for(const t of["projectId","apiKey","appId"])if(!e.options[t])throw Fe(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(e),platformLoggerProvider:R(e,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),P(new d("installations-internal",e=>{const t=R(e.getProvider("app").getImmediate(),Be).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await De(t.appConfig);return(r||je(t)).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){var n=e;return await((e=(await De(e=n.appConfig)).registrationPromise)&&await e),(await je(n,t)).token}(t,e)}},"PRIVATE")),B("@firebase/installations","0.5.1");const Ue="0.5.1",xe="FB-PERF-TRACE-MEASURE",qe="@firebase/performance/config",ze="@firebase/performance/configexpire",Ve="Performance",He=new r("performance",Ve,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Ke=new E(Ve);let We,Ge,Je,Ye;Ke.logLevel=m.INFO;class Xe{constructor(e){if(!(this.window=e))throw He.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){this.performance&&this.performance.mark&&this.performance.mark(e)}measure(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?"object"==typeof indexedDB||(Ke.info("IndexedDB is not supported by current browswer"),!1):(Ke.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,n){this.PerformanceObserver&&new this.PerformanceObserver(e=>{for(const t of e.getEntries())n(t)}).observe({entryTypes:[e]})}static getInstance(){return void 0===We&&(We=new Xe(Ge)),We}}function Ze(t,n){var e=t.length-n.length;if(e<0||1<e)throw He.create("invalid String merger input");const r=[];for(let e=0;e<t.length;e++)r.push(t.charAt(e)),n.length>e&&r.push(n.charAt(e));return r.join("")}class Qe{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Ze("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Ze("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===Ye&&(Ye=new Qe),Ye}}(z=q=q||{})[z.UNKNOWN=0]="UNKNOWN",z[z.VISIBLE=1]="VISIBLE",z[z.HIDDEN=2]="HIDDEN";const et=["firebase_","google_","ga_"],tt=new RegExp("^[a-zA-Z]\\w*$");function nt(){switch(Xe.getInstance().document.visibilityState){case"visible":return q.VISIBLE;case"hidden":return q.HIDDEN;default:return q.UNKNOWN}}function rt(e){e=null===(e=e.options)||void 0===e?void 0:e.appId;if(!e)throw He.create("no app id");return e}const it="0.0.1",ot=!0,at="FIREBASE_INSTALLATIONS_AUTH";const st="Could not fetch config, will use default configs";function ct(e){if(!e)return e;const t=Qe.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=ot,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=lt(t.tracesSamplingRate),t.logNetworkAfterSampling=lt(t.networkRequestsSamplingRate),e}function lt(e){return Math.random()<=e}let ut,pt=1;function ft(e){return pt=2,ut=ut||(t=e,function(){const n=Xe.getInstance().document;return new Promise(e=>{if(n&&"complete"!==n.readyState){const t=()=>{"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(()=>function(){const e=t.installations.getId();return e.then(e=>{Je=e}),e}()).then(e=>function(e,t){var r,i,n=function(){const e=Xe.getInstance().localStorage;if(e){var t=e.getItem(ze);if(t&&Number(t)>Date.now()){t=e.getItem(qe);if(t)try{return JSON.parse(t)}catch(e){return}}}}();return n?(ct(n),Promise.resolve()):(r=e,i=t,function(){const e=r.installations.getToken();return e.then(e=>{}),e}().then(e=>{var t=function(){var e=null===(e=r.app.options)||void 0===e?void 0:e.projectId;if(!e)throw He.create("no project id");return e}(),n=function(){var e=null===(e=r.app.options)||void 0===e?void 0:e.apiKey;if(!e)throw He.create("no api key");return e}(),e=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${t}/namespaces/fireperf:fetch?key=${n}`,{method:"POST",headers:{Authorization:`${at} ${e}`},body:JSON.stringify({app_instance_id:i,app_instance_id_token:e,app_id:rt(r.app),app_version:Ue,sdk_version:it})});return fetch(e).then(e=>{if(e.ok)return e.json();throw He.create("RC response not ok")})}).catch(()=>{Ke.info(st)}).then(ct).then(e=>function(e){const t=Xe.getInstance().localStorage;e&&t&&(t.setItem(qe,JSON.stringify(e)),t.setItem(ze,String(Date.now()+60*Qe.getInstance().configTimeToLive*60*1e3)))}(e),()=>{}))}(t,e)).then(()=>dt(),()=>dt())),ut;var t}function dt(){pt=3}let ht,mt=3,gt=[],vt=!1;function bt(e){setTimeout(()=>{if(0!==mt)return gt.length?void function(){const e=gt.splice(0,1e3),t=e.map(e=>({source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}));var n,r,i;n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Qe.getInstance().logSource,log_event:t},r=e,i=n,n=Qe.getInstance().getFlTransportFullUrl(),fetch(n,{method:"POST",body:JSON.stringify(i)}).then(e=>(e.ok||Ke.info("Call to Firebase backend failed."),e.json())).then(e=>{var t=Number(e.nextRequestWaitMillis);let n=1e4;isNaN(t)||(n=Math.max(t,n));e=e.logResponseDetails;Array.isArray(e)&&0<e.length&&"RETRY_REQUEST_LATER"===e[0].responseAction&&(gt=[...r,...gt],Ke.info("Retry transport request later.")),mt=3,bt(n)}).catch(()=>{gt=[...e,...gt],mt--,Ke.info(`Tries left: ${mt}.`),bt(1e4)})}():bt(1e4)},e)}function yt(t){return(...e)=>{!function(e){if(!e.eventTime||!e.message)throw He.create("invalid cc log");gt=[...gt,e]}({message:t(...e),eventTime:Date.now()})}}function wt(e,t){ht=ht||yt(Et),ht(e,t)}function _t(e){var t=Qe.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&Xe.getInstance().requiredApisAvailable()&&(e.isAuto&&nt()!==q.VISIBLE||(3===pt?It(e):ft(e.performanceController).then(()=>It(e),()=>It(e))))}function It(e){var t;!Je||(t=Qe.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout(()=>wt(e,1),0)}function Et(e,t){return 0===t?(t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},t={application_info:St(e.performanceController.app),network_request_metric:t},JSON.stringify(t)):function(e){const t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);e={application_info:St(e.performanceController.app),trace_metric:t};return JSON.stringify(e)}(e)}function St(e){return{google_app_id:rt(e),app_instance_id:Je,web_app_info:{sdk_version:Ue,page_url:Xe.getInstance().getUrl(),service_worker_status:"serviceWorker"in(e=Xe.getInstance().navigator)?e.serviceWorker.controller?2:3:1,visibility_state:nt(),effective_connection_type:function(){var e=Xe.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}const Tt=["_fp","_fcp","_fid"];class Ct{constructor(e,t,n=!1,r){this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=Xe.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=r||`FB-PERF-TRACE-MEASURE-${this.randomId}-${this.name}`,r&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw He.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw He.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),_t(this)}record(e,t,n){if(e<=0)throw He.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw He.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const e of Object.keys(n.metrics))isNaN(Number(n.metrics[e]))||(this.counters[e]=Number(Math.floor(n.metrics[e])));_t(this)}incrementMetric(e,t=1){void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(n=e,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<Tt.indexOf(n))&&n.startsWith("_"))throw He.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=(e=t,(t=Math.floor(e))<e&&Ke.info(`Metric value should be an Integer, setting the value as : ${t}.`),t)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){var n,r=!(0===(n=e).length||40<n.length||et.some(e=>n.startsWith(e))||!n.match(tt)),i=0!==t.length&&t.length<=100;if(r&&i)this.customAttributes[e]=t;else{if(!r)throw He.create("invalid attribute name",{attributeName:e});if(!i)throw He.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){var e=this.api.getEntriesByName(this.traceMeasure),e=e&&e[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,n,r){var i=Xe.getInstance().getUrl();if(i){const o=new Ct(e,"_wt_"+i,!0),a=Math.floor(1e3*Xe.getInstance().getTimeOrigin());if(o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n){const e=n.find(e=>"first-paint"===e.name);e&&e.startTime&&o.putMetric("_fp",Math.floor(1e3*e.startTime));const t=n.find(e=>"first-contentful-paint"===e.name);t&&t.startTime&&o.putMetric("_fcp",Math.floor(1e3*t.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}_t(o)}}static createUserTimingTrace(e,t){_t(new Ct(e,t,!1,t))}}function At(e,t){const n=t;var r,i;n&&void 0!==n.responseStart&&(i=Xe.getInstance().getTimeOrigin(),r=Math.floor(1e3*(n.startTime+i)),t=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,i=Math.floor(1e3*(n.responseEnd-n.startTime)),function(e){const t=Qe.getInstance();var n,r,i;t.instrumentationEnabled&&(n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0],n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout(()=>wt(e,0),0))}({performanceController:e,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:i}))}function Nt(e){Je&&(setTimeout(()=>function(n){const e=Xe.getInstance(),r=e.getEntriesByType("navigation"),i=e.getEntriesByType("paint");if(e.onFirstInputDelay){let t=setTimeout(()=>{Ct.createOobTrace(n,r,i),t=void 0},5e3);e.onFirstInputDelay(e=>{t&&(clearTimeout(t),Ct.createOobTrace(n,r,i,e))})}else Ct.createOobTrace(n,r,i)}(e),0),setTimeout(()=>function(t){const e=Xe.getInstance(),n=e.getEntriesByType("resource");for(const e of n)At(t,e);e.setupObserver("resource",e=>At(t,e))}(e),0),setTimeout(()=>function(t){const e=Xe.getInstance(),n=e.getEntriesByType("measure");for(const e of n)Ot(t,e);e.setupObserver("measure",e=>Ot(t,e))}(e),0))}function Ot(e,t){const n=t.name;n.substring(0,xe.length)!==xe&&Ct.createUserTimingTrace(e,n)}class kt{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),Xe.getInstance().requiredApisAvailable()?new Promise((t,n)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var e;n((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(t){n(t)}}).then(e=>{e&&(vt||(bt(5500),vt=!0),ft(this).then(()=>Nt(this),()=>Nt(this)),this.initialized=!0)}).catch(e=>{Ke.info(`Environment doesn't support IndexedDB: ${e}`)}):Ke.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Qe.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Qe.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Qe.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Qe.getInstance().dataCollectionEnabled}}P(new d("performance",(e,{options:t})=>{var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==n.name)throw He.create("FB not default");if("undefined"==typeof window)throw He.create("no window");e=window,Ge=e;const i=new kt(n,r);return i._init(t),i},"PUBLIC")),B("@firebase/performance","0.5.1");class Dt{constructor(e,t){this.app=e,this._delegate=t}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return t=this._delegate,e=e,t=t&&t._delegate?t._delegate:t,new Ct(t,e);var t}}return(z=G).INTERNAL.registerComponent(new d("performance-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),e=e.getProvider("performance").getImmediate();return new Dt(t,e)},"PUBLIC")),z.registerVersion("@firebase/performance-compat","0.1.1"),G.registerVersion("firebase","9.1.2","compat-lite"),G});